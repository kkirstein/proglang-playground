# vim: sw=2 ts=2
#
# Rakefile for yarn-test utilities
#

require 'rake/clean'
require 'rake/testtask'
require "minitest/test_task"

# default task
task default: %w[test]
task dist: %w[benchmark.exe]

# clean tasks
CLEAN.include("*.exe")

# test task
Minitest::TestTask.create # named test, sensible defaults

# or more explicitly:
#Minitest::TestTask.create(:test) do |t|
#  t.libs << "test"
#  t.libs << "lib"
#  t.warning = false
#  t.test_globs = ["test/**/*_test.rb"]
#end

# file tasks
file "benchmark.exe" => ["bin/benchmark.rb"] do |t|
	sh "ocran #{t.prerequisites.join(' ')}"

end

